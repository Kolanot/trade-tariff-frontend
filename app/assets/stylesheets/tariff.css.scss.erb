/* global variables */

$token-width: 26px; /* 25px width + 1px border */
$token-padding: 5px;
$token-space: $token-width + $token-padding; /* Uses above values */
$top-level-padding: 10px;

/* end global variables */

/* mixins */

@mixin contain-float {
  zoom: 1;

  &:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
  }
}

// selected sections have consistent styling except for their spacing from the left-side
// this is therefore left as a variable value

@mixin selected-section($side-padding) {
  margin: 0 (-1 * $top-level-padding) 0 (-1 * $side-padding);
  padding: $top-level-padding $top-level-padding $top-level-padding $side-padding;
  background: #fff;
  
  li,
  dd {
    padding-top:0px;
    border-top:1px solid #eee;
  }
  
  li:first-child,
  dd:nth-child(2) {
    padding-top:1px;
    border-top:none;
  }
}

/* end mixins */

.tariff p {
  font-size:1em;
}
.tariff .inner {
  padding: 0;
}

header.page-header {
  padding-bottom: 0;
  margin: 0;
  border-bottom: 0;

  hgroup {
    border-top-color: #7FB299;
    padding-bottom: 0;

    h1 {
      padding-left: 0;

      span {
        color: #10370D;
      }
    }
  }
}

#new_commodity_search {
  position: absolute;
  right: 0;
  top: 0;
  background: #fff;
  width: 174px;
  padding: 5px 13px;
  font-size: 0.85em;

  .btn {
    background-color: #28a197;
    border-color: #28a197;
  }
}

#commodity_search_q {
  width: 8em;
}

#index {
  list-style-type:upper-roman
}

article dl {
  padding: $top-level-padding $top-level-padding 0 $top-level-padding;
  margin: 0;
  background: #e1e8e8;
  position: relative;
}

article dl dl {
  @include contain-float;
  margin-left:$token-width - $top-level-padding;
  padding-top:0px;
}

article dt {
  float: left;
  width: $token-width;
  clear: left;
  text-align: center;
  display: block;
  font-size: 1em;
  position: absolute;
  left: 0;
  margin-bottom:0; /* reset of static */
}

@mixin tariff-identifier {
  background: #CCE0D6;
  border-top: solid 1px #7FB299;
  border-right: solid 1px #7FB299;
}

article.tariff {
  padding-bottom:2em;
}

dl.tariff-fragments {
  padding: 0;
  margin-left: -1 * $token-space;

  dt {
    @include tariff-identifier;
  }

  dd {
    float: none;
    padding-left: $token-space;
    padding-top:1px; /* offset the border-bottom on the token */
    margin: 0;
  }

  dl {
    position: relative;
    margin-left:-1 * $token-padding;
    padding:0;
  }
}

article dd {
  float: left;
  display: block;
  margin: 0;
  padding-left: $token-space - $top-level-padding;

  // this is so the children of this are cleared out left as the
  // internal content is pushed over by the float
  &.section-heading {
    width: auto;
    float: none;
    margin-bottom: 0;
  }
}

dl h1 {
  font-size: 100%;
  margin: 0;
  line-height: 1.5em;
  color: #333;
}

/* sections */

p.sections-intro {
  padding-left:0.5em;
  padding-right:1em;
}

dl.sections {
  background:#fff;
}

dl.sections dt {
  position:static;
  width:15%;
  padding-left:10%;
  text-align:left;
}

dl.sections dd {
  width:75%;
  padding-left:0px;
}

/* chapters and chapter headings */

dl.tariff-fragments dl.chapter-headings,
dl.chapters,
p.chapters-intro {
  margin-left:-1 * $token-space;
  @include selected-section($token-space);
}

dl.chapter-headings dt,
dl.chapters dt {
  left:$token-space;
}

/* variables local to commodities */

$commodity-padding: ((2 * $token-width) + $token-padding);
$expand-arrow-width: 9px;
$expand-arrow-space: 9px + $token-padding;

/* end variables local to commodities */

ul.commodities,
ul.commodities ul {
  list-style:none;
}

ul.commodities {  
  @include selected-section($commodity-padding);
  
  li {
    display: block;
    margin: 0;
    @include contain-float;
    padding: 0;    

    span {
      font-size: 0.85em;
      float: left;
      display: block;

      &.identifier {
        @include tariff-identifier;
        float: right;
        border: 0;
        width: 4.5em;
        padding: 0 0.25em;
      }
    }

    a {
      display: block;
      @include contain-float;
    }
  }

  li:last-child {
    border-bottom: 0;
  }

  ul {
    margin: 0;
    padding-left: 2em;
    clear: both;
  }
}

.js-enabled {
  li.has_children {
    
  }

  li.open {
    background-position: 0 -100px;
  }
  
  li.has_children .description {
    padding-left: $expand-arrow-space;
    background-image: url(<%= asset_path "expand-collapse-transparent.png" %>);
    background-position: 0 7px;
    background-repeat: no-repeat;
  }
  
  li.has_children .open {
    background-position:0 -84px;
  }
  
  li.has_children a .description {
    padding-left:0;
    background:none;
  }
}